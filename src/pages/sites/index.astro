---
import Layout from "../../layouts/Layout.astro";
import SitesListing from "../../components/listing/SitesListing.jsx";
import { fetchSites, transformSiteData } from "../../services/sitesService.js";

// Récupérer les sites depuis l'API
const sitesData = await fetchSites();
const sites = sitesData.data.map(transformSiteData);
---

<Layout
  title="Sites - Castagniccia Casinca"
  pageCategory="sites"
  pageName="liste-sites"
>
  <SitesListing sites={sites} client:load />
</Layout>
