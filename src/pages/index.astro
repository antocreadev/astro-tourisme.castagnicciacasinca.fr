---
import Layout from "../layouts/Layout.astro";
import Hero from "../components/Hero.astro";
import Agenda from "../components/Agenda.jsx";
import CarteSection from "../components/CarteSection.jsx";
import LesIncontournables from "../components/LesIncontournables.jsx";
import Sejourner from "../components/Sejourner.jsx";
import InformationsPratiques from "../components/InformationsPratiques.jsx";
import Footer from "../components/Footer.jsx";
import LesPlages from "../components/LesPlages";
import ActiviteLoisir from "../components/ActiviteLoisir";
import DecouvreTerritoire from "../components/DecouvreTerritoire";
import ArtisanatTerroirReal from "../components/ArtisanatTerroirReal";
import { type RootGlobal } from "../types/gloabal";

import { PUBLIC_API_URL } from "astro:env/client";
console.log("API URL:", PUBLIC_API_URL);

const data = await fetch(`${PUBLIC_API_URL}/api/global`, {
  method: "GET",
  headers: {
    "Content-Type": "application/json",
  },
});

const globalData: RootGlobal = await data.json();
console.log("Global Data:", globalData);
---

<Layout>
  <Hero />
  <Agenda client:visible />
  <CarteSection client:visible />
  <LesIncontournables client:visible />
  <DecouvreTerritoire client:visible />
  <Sejourner client:visible />
  <LesPlages client:visible />
  <ArtisanatTerroirReal client:visible />
  <ActiviteLoisir client:visible />
  <InformationsPratiques client:visible />
  <Footer client:visible data={globalData} />
</Layout>
