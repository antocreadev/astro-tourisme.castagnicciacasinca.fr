---
import Layout from "../../layouts/Layout.astro";
import AgendaListing from "../../components/listing/AgendaListing.jsx";
import { PUBLIC_API_URL } from "astro:env/client";
import type { RootEvenements } from "../../types/evenements";

const dataEvenements = await fetch(`${PUBLIC_API_URL}/api/evenements`, {
  method: "GET",
  headers: {
    "Content-Type": "application/json",
  },
});

const dataEvenementsJson: RootEvenements = await dataEvenements.json();
---

<Layout 
  title="Agenda - Castagniccia Casinca"
  pageCategory="agenda"
  pageName="liste-evenements"
>
  <AgendaListing events={dataEvenementsJson.data} client:load />
</Layout>
