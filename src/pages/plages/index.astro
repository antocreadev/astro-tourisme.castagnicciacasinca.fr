---
import Layout from "../../layouts/Layout.astro";
import PlagesListing from "../../components/listing/PlagesListing.jsx";
import { PUBLIC_API_URL } from "astro:env/client";
import type { RootPlage } from "../../types/plages";

// Fetch plages data
const response = await fetch(`${PUBLIC_API_URL}/api/plages`, {
  method: "GET",
  headers: {
    "Content-Type": "application/json",
  },
});

const plagesData: RootPlage = await response.json();
---

<Layout 
  title="Plages - Castagniccia Casinca"
  pageCategory="plages"
  pageName="liste-plages"
>
  <main>
    <PlagesListing plages={plagesData.data} client:load />
  </main>
</Layout>
